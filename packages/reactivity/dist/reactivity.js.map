{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/effect.ts", "../src/reactiveEffect.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["export function isObject(value){\n    return typeof value === 'object' && value !== null;\n}\n", "export function effect(fn, options?) {\n  //\u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0Feffect \u6570\u636E\u53D8\u5316\u540E\u53EF\u4EE5\u89E6\u53D1\u56DE\u8C03\n  const _effect=new ReactiveEffect(fn,()=>{\n    _effect.run();\n  });\n  //\u7ACB\u5373\u6267\u884C\n   _effect.run();\n\n   return _effect;\n}\n\nexport let activeEffect=null;\n\nclass ReactiveEffect {\n  public active=true; //\u521B\u5EFA\u7684effect\u662F\u54CD\u5E94\u5F0F\u7684\n  constructor(public fn) {\n\n  }\n\n  run(){\n    if(!this.active){\n      return this.fn();\n    }\n   let lastEffect=activeEffect;\n\n   try{\n     activeEffect=this;\n     return this.fn();\n   }finally{\n     activeEffect=lastEffect;\n   }\n  }\n\n  stop(){\n    //\n  }\n}\n", "import { activeEffect } from './effect'\n\nconst targetMap = new WeakMap();\n\nexport function track(target, key) {\n  //activeEffect \u662F effect.ts \u4E2D\u5B9A\u4E49\u7684\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\uFF0C\u5728 track \u51FD\u6570\u6267\u884C\u65F6\uFF0C\n    if (activeEffect) {\n        let depsMap = targetMap.get(target);\n        if (!depsMap) {\n            depsMap = new Map();\n            targetMap.set(target, depsMap);\n        }\n        let dep = depsMap.get(key);\n        if (!dep) {\n            dep = new Set();\n            depsMap.set(key, dep);\n        }\n        dep.add(activeEffect);\n    }\n}\n", "import { track } from './reactiveEffect'\n\nexport enum ReactiveFlags{\n  IS_REACTIVE=\"__v_isReactive\",\n}\n\n// \u4F7F\u7528proxy \u65F6 \u6700\u597D\u642D\u914D Reflect \u4F7F\u7528\nexport const handler:ProxyHandler<any>={\n  get(target,key,receiver){\n    if(target[ReactiveFlags.IS_REACTIVE]){\n      return true\n    }\n\n    track(target,key)\n    return Reflect.get(target,key,receiver)\n  },\n  set(target,key,value,receiver){\n    //TODO \u8BBE\u7F6E\u503C\u65F6 \u9700\u8981\u901A\u77E5\u8BA2\u9605\u8005\n\n    return Reflect.set(target,key,value,receiver);\n  }\n}\n", "import { isObject } from '@vue/shared'\nimport { handler, ReactiveFlags } from './baseHandler'\n\nconst reactiveMap=new WeakMap();\n\nfunction createReactiveObject(target){\n  if(!isObject(target)){\n    return target\n  }\n\n  if(target[ReactiveFlags.IS_REACTIVE]){\n    return target\n  }\n\n  const existingProxy=reactiveMap.get(target)\n  if(existingProxy){\n    return existingProxy\n  }\n\n const proxy=new Proxy(target, handler)\n reactiveMap.set(target, proxy)\n return proxy\n}\n\nexport function reactive(target){\n  return createReactiveObject(target)\n}\n"],
  "mappings": ";AAAO,SAAS,SAAS,OAAM;AAC3B,SAAO,OAAO,UAAU,YAAY,UAAU;AAClD;;;ACFO,SAAS,OAAO,IAAI,SAAU;AAEnC,QAAM,UAAQ,IAAI,eAAe,IAAG,MAAI;AACtC,YAAQ,IAAI;AAAA,EACd,CAAC;AAEA,UAAQ,IAAI;AAEZ,SAAO;AACV;AAEO,IAAI,eAAa;AAExB,IAAM,iBAAN,MAAqB;AAAA;AAAA,EAEnB,YAAmB,IAAI;AAAJ;AADnB,SAAO,SAAO;AAAA,EAGd;AAAA,EAEA,MAAK;AACH,QAAG,CAAC,KAAK,QAAO;AACd,aAAO,KAAK,GAAG;AAAA,IACjB;AACD,QAAI,aAAW;AAEf,QAAG;AACD,qBAAa;AACb,aAAO,KAAK,GAAG;AAAA,IACjB,UAAC;AACC,qBAAa;AAAA,IACf;AAAA,EACD;AAAA,EAEA,OAAM;AAAA,EAEN;AACF;;;AClCA,IAAM,YAAY,oBAAI,QAAQ;AAEvB,SAAS,MAAM,QAAQ,KAAK;AAE/B,MAAI,cAAc;AACd,QAAI,UAAU,UAAU,IAAI,MAAM;AAClC,QAAI,CAAC,SAAS;AACV,gBAAU,oBAAI,IAAI;AAClB,gBAAU,IAAI,QAAQ,OAAO;AAAA,IACjC;AACA,QAAI,MAAM,QAAQ,IAAI,GAAG;AACzB,QAAI,CAAC,KAAK;AACN,YAAM,oBAAI,IAAI;AACd,cAAQ,IAAI,KAAK,GAAG;AAAA,IACxB;AACA,QAAI,IAAI,YAAY;AAAA,EACxB;AACJ;;;ACZO,IAAM,UAA0B;AAAA,EACrC,IAAI,QAAO,KAAI,UAAS;AACtB,QAAG,OAAO,kCAAyB,GAAE;AACnC,aAAO;AAAA,IACT;AAEA,UAAM,QAAO,GAAG;AAChB,WAAO,QAAQ,IAAI,QAAO,KAAI,QAAQ;AAAA,EACxC;AAAA,EACA,IAAI,QAAO,KAAI,OAAM,UAAS;AAG5B,WAAO,QAAQ,IAAI,QAAO,KAAI,OAAM,QAAQ;AAAA,EAC9C;AACF;;;AClBA,IAAM,cAAY,oBAAI,QAAQ;AAE9B,SAAS,qBAAqB,QAAO;AACnC,MAAG,CAAC,SAAS,MAAM,GAAE;AACnB,WAAO;AAAA,EACT;AAEA,MAAG,yCAAgC,GAAE;AACnC,WAAO;AAAA,EACT;AAEA,QAAM,gBAAc,YAAY,IAAI,MAAM;AAC1C,MAAG,eAAc;AACf,WAAO;AAAA,EACT;AAED,QAAM,QAAM,IAAI,MAAM,QAAQ,OAAO;AACrC,cAAY,IAAI,QAAQ,KAAK;AAC7B,SAAO;AACR;AAEO,SAAS,SAAS,QAAO;AAC9B,SAAO,qBAAqB,MAAM;AACpC;",
  "names": []
}
